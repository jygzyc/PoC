package fun.lilac.exploit.utils;

import java.util.List;
import java.util.Map;

/**
 * 定义服务结构
 * 包含了服务名和接口结构，methodInfo中包括了接口的Code值，接口的名称，接口参数类型数组，返回值类型
 */
public class ServiceInfo {
    private String serviceName;
    private Map<Integer, List<String>> methodInfo;

    public ServiceInfo(){}

    public ServiceInfo(String serviceName){
        this.serviceName = serviceName;
    }

    public ServiceInfo(String serviceName, Map<Integer, List<String>> methodInfo){
        this.serviceName = serviceName;
        this.methodInfo = methodInfo;
    }

    public String getServiceName() {
        return this.serviceName;
    }

    public void setServiceName(String serviceName) {
        this.serviceName = serviceName;
    }

    public Map<Integer, List<String>> getMethodInfo() {
        return this.methodInfo;
    }

    public void setMethodInfo(Map<Integer, List<String>> methodInfo) {
        if(this.methodInfo != null){
            this.methodInfo = methodInfo;
        }
    }


    /**
     * 获取接口名称
     * @param serviceName
     * @param code
     * @return
     */
    public String getMethodName(String serviceName, int code){
        if(this.serviceName.equals(serviceName)){
            return this.methodInfo.get(code).get(0);
        }
        return null;
    }

    /**
     * 获取接口参数类型数组
     * @param serviceName
     * @param code
     * @return
     */
    public String[] getMethodParamTypes(String serviceName, int code){
        if(this.serviceName.equals(serviceName)){
            return this.methodInfo.get(code).get(1).split(";");
        }
        return null;
    }

    /**
     * 获取接口返回值参数
     * @param serviceName
     * @param code
     * @return
     */
    public String getMethodReturnType(String serviceName, int code){
        if(this.serviceName.equals(serviceName)){
            return this.methodInfo.get(code).get(2);
        }
        return null;
    }

    /**
     * 设置ServiceInfo
     * @param serviceName
     * @param methodInfo
     * @return ServiceInfo
     */
    public ServiceInfo setServiceInfo(String serviceName, Map<Integer, List<String>> methodInfo){
        this.serviceName = serviceName;
        this.methodInfo = methodInfo;
        return this;
    }
}
